<!DOCTYPE html>
<html>
  <head>
    <title>GenieLearn Professional Favicon</title>
    <style>
      body {
        font-family: system-ui;
        padding: 20px;
        background: #f8fafc;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .step {
        margin: 20px 0;
        padding: 15px;
        border-left: 4px solid #3b82f6;
        background: #f8fafc;
      }
      .favicon-preview {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        margin: 20px 0;
      }
      .favicon-item {
        text-align: center;
      }
      canvas {
        border: 1px solid #ddd;
        margin: 5px;
      }
      button {
        background: #3b82f6;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        margin: 2px;
      }
      button:hover {
        background: #2563eb;
      }
      .logo-container {
        text-align: center;
        margin: 20px 0;
      }
      img {
        max-width: 150px;
        border: 1px solid #ddd;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>🎯 GenieLearn Professional Favicon Solution</h1>

      <div class="step">
        <h3>Step 1: Your Logo</h3>
        <div class="logo-container">
          <img
            id="logo"
            src="logo.png"
            alt="GenieLearn Logo"
            onload="generateCleanFavicons()"
          />
          <p id="logoStatus">Loading your logo...</p>
        </div>
      </div>

      <div class="step">
        <h3>Step 2: Professional Favicons Generated</h3>
        <div class="favicon-preview" id="faviconPreview"></div>
      </div>

      <div class="step">
        <h3>Step 3: Download & Replace</h3>
        <p>
          Click the download buttons above, then replace the old favicon files
          in your public folder.
        </p>
        <button
          onclick="downloadAll()"
          style="background: #059669; font-weight: bold"
        >
          📦 Download All Favicons
        </button>
      </div>
    </div>

    <script>
      let generatedFavicons = [];

      function generateCleanFavicons() {
        const logo = document.getElementById("logo");
        const logoStatus = document.getElementById("logoStatus");
        const preview = document.getElementById("faviconPreview");

        if (!logo.complete || logo.naturalWidth === 0) {
          logoStatus.innerHTML = "❌ Logo not found. Using fallback design.";
          generateFallbackFavicons();
          return;
        }

        logoStatus.innerHTML = "✅ Logo loaded successfully!";

        const sizes = [
          { size: 16, name: "favicon-16x16.png" },
          { size: 32, name: "favicon-32x32.png", primary: true },
          { size: 180, name: "apple-touch-icon.png" },
          { size: 192, name: "android-chrome-192x192.png" },
          { size: 512, name: "android-chrome-512x512.png" },
        ];

        preview.innerHTML = "";
        generatedFavicons = [];

        sizes.forEach(({ size, name, primary }) => {
          const canvas = document.createElement("canvas");
          canvas.width = size;
          canvas.height = size;
          const ctx = canvas.getContext("2d");

          // High-quality rendering
          ctx.imageSmoothingEnabled = true;
          ctx.imageSmoothingQuality = "high";

          // Clean white background
          ctx.fillStyle = "#ffffff";
          ctx.fillRect(0, 0, size, size);

          // Minimal padding for professional look
          const padding = size <= 32 ? 2 : Math.ceil(size * 0.05);
          const logoSize = size - padding * 2;

          // Draw logo centered and clean
          ctx.drawImage(logo, padding, padding, logoSize, logoSize);

          // Create preview
          const item = document.createElement("div");
          item.className = "favicon-item";

          const previewCanvas = document.createElement("canvas");
          previewCanvas.width = size;
          previewCanvas.height = size;
          previewCanvas.style.width = "48px";
          previewCanvas.style.height = "48px";
          const previewCtx = previewCanvas.getContext("2d");
          previewCtx.drawImage(canvas, 0, 0);

          item.innerHTML = `
                    <div><strong>${size}×${size}</strong>${
            primary ? " (Primary)" : ""
          }</div>
                    <button onclick="downloadFavicon('${name}', ${size})">Download</button>
                `;
          item.insertBefore(previewCanvas, item.firstChild);

          preview.appendChild(item);
          generatedFavicons.push({ canvas, name, size });
        });
      }

      function generateFallbackFavicons() {
        const preview = document.getElementById("faviconPreview");
        const sizes = [16, 32, 180, 192, 512];

        preview.innerHTML = "";
        generatedFavicons = [];

        sizes.forEach(size => {
          const canvas = document.createElement("canvas");
          canvas.width = size;
          canvas.height = size;
          const ctx = canvas.getContext("2d");

          // Professional gradient background
          const gradient = ctx.createLinearGradient(0, 0, size, size);
          gradient.addColorStop(0, "#3b82f6");
          gradient.addColorStop(1, "#1d4ed8");

          ctx.fillStyle = gradient;
          ctx.fillRect(0, 0, size, size);

          // Clean "GL" text
          ctx.fillStyle = "#ffffff";
          ctx.font = `bold ${Math.ceil(
            size * 0.45
          )}px system-ui, -apple-system, sans-serif`;
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.fillText("GL", size / 2, size / 2);

          const name =
            size === 16
              ? "favicon-16x16.png"
              : size === 32
              ? "favicon-32x32.png"
              : size === 180
              ? "apple-touch-icon.png"
              : size === 192
              ? "android-chrome-192x192.png"
              : "android-chrome-512x512.png";

          // Preview
          const item = document.createElement("div");
          item.className = "favicon-item";

          const previewCanvas = document.createElement("canvas");
          previewCanvas.width = size;
          previewCanvas.height = size;
          previewCanvas.style.width = "48px";
          previewCanvas.style.height = "48px";
          const previewCtx = previewCanvas.getContext("2d");
          previewCtx.drawImage(canvas, 0, 0);

          item.innerHTML = `
                    <div><strong>${size}×${size}</strong></div>
                    <button onclick="downloadFavicon('${name}', ${size})">Download</button>
                `;
          item.insertBefore(previewCanvas, item.firstChild);

          preview.appendChild(item);
          generatedFavicons.push({ canvas, name, size });
        });
      }

      function downloadFavicon(filename, size) {
        const faviconData = generatedFavicons.find(f => f.name === filename);
        if (!faviconData) return;

        faviconData.canvas.toBlob(
          blob => {
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
          },
          "image/png",
          1.0
        );
      }

      function downloadAll() {
        generatedFavicons.forEach(({ name }) => {
          setTimeout(() => downloadFavicon(name), Math.random() * 1000);
        });
      }

      // Handle logo load error
      document.getElementById("logo").onerror = function () {
        document.getElementById("logoStatus").innerHTML =
          "⚠️ Logo not found. Creating clean fallback favicons.";
        generateFallbackFavicons();
      };

      // Auto-start if logo already loaded
      window.onload = function () {
        const logo = document.getElementById("logo");
        if (logo.complete) {
          if (logo.naturalWidth > 0) {
            generateCleanFavicons();
          } else {
            generateFallbackFavicons();
          }
        }
      };
    </script>
  </body>
</html>
